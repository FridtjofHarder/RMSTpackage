% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_sample_size.R
\name{calculate_sample_size}
\alias{calculate_sample_size}
\title{Calculates sample size or test power}
\usage{
calculate_sample_size(
  scale_trmt,
  shape_trmt = 1,
  scale_ctrl,
  shape_ctrl = 1,
  parameterization = 1,
  accrual_time = 0,
  follow_up_time = NULL,
  tau = NULL,
  sides = 1,
  one_sided_alpha = 0.025,
  power = 0.8,
  margin_cox = 1,
  margin_rmst = 0,
  RMSTD_closed_form = FALSE,
  RMSTR_closed_form = FALSE,
  RMSTD_simulation = FALSE,
  RMSTR_simulation = FALSE,
  cox_ph_simulation = FALSE,
  censor_beyond_tau = FALSE,
  M = 100,
  simulation_sample_size,
  plot_design_curves = TRUE,
  plot_example_data = TRUE,
  loss_scale,
  loss_shape = 1
)
}
\arguments{
\item{scale_trmt}{A scalar \eqn{>0} specifying the \dfn{scale parameter} in the treatment group.}

\item{shape_trmt}{A scalar \eqn{>0} specifying the \dfn{shape parameter} in the treatment group. Defaults to \code{shape_trmt} \eqn{=1}, simplifying to exponential survival.}

\item{scale_ctrl}{A scalar \eqn{>0} specifying the \dfn{scale parameter} in the treatment group.}

\item{shape_ctrl}{A scalar \eqn{>0} specifying the \dfn{shape parameter} in the treatment group. Defaults to \code{shape_ctrl} \eqn{=1}, simplifying to exponential survival.}

\item{parameterization}{One of: \itemize{
\item \code{parameterization = 1}: Specifies Weibull distributed survival as \eqn{S(t) = 1- F(t) = \exp{(-(t/\mathrm{scale})^\mathrm{shape}))}},
\item \code{parameterization = 2}: Specifies Weibull distributed survival as \eqn{S(t) = 1- F(t) = \exp{(-\mathrm{scale} * t^\mathrm{shape})}},
\item \code{parametrization = 3}: Specifies Weibull distributed survival as \eqn{S(t) = 1- F(t) = \exp{(-(\mathrm{scale} * t)^\mathrm{shape})}}.}}

\item{accrual_time}{Length of accrual period.}

\item{follow_up_time}{Length of follow-up period.}

\item{tau}{A scalar \eqn{>0} specifying the time horizon \eqn{\tau} at which to evaluate RMST with \eqn{\mathrm{RMST} = \int_{0}^{\tau}S(t) \,dt}.}

\item{sides}{Sidedness of inference test, either \code{1} or \code{2}.}

\item{one_sided_alpha}{MISSING}

\item{power}{Test power with \code{power} \eqn{=1-\beta}.}

\item{margin_cox}{Non-inferiority margin for Cox regression. \code{margin_cox} \eqn{=1} simplifies to superiority test.}

\item{margin_rmst}{Non-inferiority margin for RMST difference. \code{margin_rmst} \eqn{=0} simplifies to superiority test.}

\item{RMSTD_closed_form}{MISSING}

\item{RMSTR_closed_form}{MISSING}

\item{RMSTD_simulation}{MISSING}

\item{RMSTR_simulation}{MISSING}

\item{cox_ph_simulation}{MISSING}

\item{censor_beyond_tau}{MISSING}

\item{M}{Positive Integer. Number of iterations when running simulation.}

\item{simulation_sample_size}{MISSING}

\item{plot_design_curves}{Boolean. Specifies whether to plot survival curves.}

\item{plot_example_data}{Boolean. Specifies whether to create a plot with example data .}

\item{loss_scale}{MISSING}

\item{loss_shape}{MISSING}
}
\value{
Returns a list with sample size and a test power.
}
\description{
Currently only determination of test power via simulation! Function for calculating the sample size given a desired test power, or the test power given a sample size.
Sample size and test power can be determined either analytically or by simulation.
}
\details{
Sample size and power determination for both superiory and non-inferiority analysis are supported.
Survival curves need to be defined by \dfn{scale} and \dfn{shape} parameter, in the standard parameterization
defined by \eqn{S(t) = 1- F(t) = \exp{(-(t/\mathrm{scale})^\mathrm{shape}))}}. Sample size and power
can be determined for either Cox regression or RMST-based methods (test for RMST difference and RMST ratio).
For comparing Cox regression with RMST based methods, all observations past time horizon \eqn{\tau}
may be censored if desired.
}
\examples{
calculate_sample_size(
scale_trmt = 1.4,
scale_ctrl = 1,
accrual_time = 1,
follow_up_time = 10,
tau = 1,
RMSTD_simulation = TRUE,
RMSTR_simulation = TRUE,
cox_ph_simulation = TRUE,
loss_scale = 1,
M = 100,
simulation_sample_size = 100)

}
\references{
Yung, G., & Liu, Y. (2020). Sample size and power for the weighted log-rank test and Kaplan-Meier based tests with allowance for
nonproportional hazards. \emph{Biometrics}, \strong{76(3)}, 939-950.
}
