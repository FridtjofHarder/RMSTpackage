% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_sample_size.R
\name{calculate_sample_size}
\alias{calculate_sample_size}
\title{Calculate sample size}
\usage{
calculate_sample_size(
  scale_trmt,
  shape_trmt = 1,
  scale_ctrl,
  shape_ctrl = 1,
  parameterization = 1,
  accrual_time = 0,
  follow_up_time = NULL,
  tau = NULL,
  sides = 1,
  alpha = 0.025,
  power = 0.8,
  margin = 0,
  RMSTD_closed_form = FALSE,
  RMSTR_closed_form = FALSE,
  RMSTD_simulation = FALSE,
  RMSTR_simulation = FALSE,
  cox_ph_simulation = FALSE,
  censor_beyond_tau = FALSE,
  M = 100,
  simulation_sample_size,
  plot_design_curves = TRUE,
  plot_example_data = TRUE,
  loss_scale,
  loss_shape = 1
)
}
\arguments{
\item{scale_trmt}{A scalar \eqn{>0} specifying the \dfn{scale parameter} in the treatment group.}

\item{shape_trmt}{A scalar \eqn{>0} specifying the \dfn{shape parameter} in the treatment group. Defaults to \code{shape_trmt} \eqn{=1}, simplifying to exponential survival.}

\item{scale_ctrl}{A scalar \eqn{>0} specifying the \dfn{scale parameter} in the treatment group.}

\item{shape_ctrl}{A scalar \eqn{>0} specifying the \dfn{shape parameter} in the treatment group. Defaults to \code{shape_ctrl} \eqn{=1}, simplifying to exponential survival.}

\item{parameterization}{One of: \itemize{
\item \code{parameterization = 1}: specifies Weibull distributed survival as \eqn{S(t) = 1- F(t) = \exp{(-(t/\mathrm{scale})^\mathrm{shape}))}},
\item \code{parameterization = 2}: specifies Weibull distributed survival as \eqn{S(t) = 1- F(t) = \exp{(-\mathrm{scale} * t^\mathrm{shape})}},
\item \code{parametrization = 3}: specifies Weibull distributed survival as \eqn{S(t) = 1- F(t) = \exp{(-(\mathrm{scale} * t)^\mathrm{shape})}}.}}

\item{accrual_time}{length of accrual period}

\item{follow_up_time}{length of follow-up period}

\item{tau}{A scalar speifying the time horizon \eqn{\tau} at which to evaluate RMST with \eqn{\mathrm{RMST} = \int_{0}^{\tau}S(t) \,dt}.}

\item{sides}{sidedness of inference test}

\item{alpha}{level of \eqn{\alpha}-error}

\item{power}{test power with \code{power} \eqn{=1-\beta}}

\item{margin}{noninferiority margin. \code{margin} \eqn{>0} specifies a margin below the RMST of the control group.}

\item{M}{number of iterations when running simulation.}

\item{simulation}{indicates whether to run a simulation based in the package \pkg{SSRMST}. Boolean.}

\item{make_plot}{specifies whether to plot survival curves. Boolean.}
}
\value{
Returns a dataframe with a sample size and a test power. The sample size is calculated using the closed form function provided by the package
\pkg{npsurvSS}, the test power is obtained by running a simulation based on the package \pkg{SSRMST}. Both methods (closed form and simulation) come
to simiular results when the test power calculated is similar to the test power provided in the function call (default \code{power} \eqn{=0.8}).
}
\description{
Two approaches have been proposed for sample size calculation in the context of survival study design when choosing the difference or ratio between restricted mean survival times (RMSTs) as a contrast.
One approach is based on simulating trials according to prespecified parameters, the second approach is based on a closed form approximation as proposed by Yung and Liu (2020).
This function allows for comparing both approaches. The functions from the package \pkg{npsurvSS} have been extended to allow for sample size calculations when designing not only superiority, but also noninferioity trials.
Simulations for sample size calculations are based in the package \pkg{SSRMST} which natively allows for sample size calculation in superiority and noninferiority study design (Horiguchi and Uno, 2017).
}
\details{
ToDo:  cure fraction
admin censoring
loss to FU
plot example data as KM curve and as recruitment plot
Cox regression univariate
Replace SSRMST with own package
allow for censoring of all at patient time for logRank (vergleich, ob dadurch das Resultat von RMST-Test sich ver√§ndert)
zwei Fragen: 1. Ist RMST so gut wie Cox?
2. ist clsoed form so gut wie simul?
Anmeldung!!!
# Unterschied Zensur nach Zeithorizont, Zensur nach Studienzeit, oder Zensur zum Median
RFrage: Unterschied Makuch-Simon vs LRank test sample size
}
\examples{
calculate_sample_size(
scale_trmt = 1.4,
scale_ctrl = 1,
accrual_time = 1,
follow_up_time = 10,
tau = 1,
RMSTD_simulation = TRUE,
RMSTR_simulation = TRUE,
cox_ph_simulation = TRUE,
loss_scale = 1,
M = 100,
simulation_sample_size = 100)

}
\references{
Yung, G., & Liu, Y. (2020). Sample size and power for the weighted log-rank test and Kaplan-Meier based tests with allowance for
nonproportional hazards. \emph{Biometrics}, \strong{76(3)}, 939-950.
}
